(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{127:function(e,t,n){},128:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),s=n(31),i=n(84),u=n(15),l=n(60),b=n(16),d=n(85),j=n.n(d),p=n(33),f=n(86),h=n.n(f),m=n(26),O=n(13),g=n.n(O),v=n(19),x=n(24),y=n.n(x),w=localStorage.getItem("persist:root");y.a.defaults.baseURL="https://connections-api.herokuapp.com";var k,C=function(e){y.a.defaults.headers.common.Authorization="Bearer ".concat(e)},N=function(){y.a.defaults.headers.common.Authorization=""},S=Object(b.c)("auth/register",function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,y.a.post("/users/signup",t);case 4:return n=e.sent,r=n.data,C(r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",new Error(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),L=Object(b.c)("auth/login",function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t),e.next=4,y.a.post("/users/login",t);case 4:return n=e.sent,r=n.data,C(null===r||void 0===r?void 0:r.token),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",new Error(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),_={register:S,logout:Object(b.c)("auth/logout",function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("/users/logout");case 3:N(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),login:L,currentUser:Object(b.c)("auth/current",function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("/users/current",{headers:{Authorization:"Bearer ".concat(null===(n=JSON.parse(w))||void 0===n?void 0:n.token.replace(/['"]/g,""))}});case 3:return r=e.sent,a=r.data,C(a.token),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())},z={user:{name:null,email:null},token:null,isLoggedIn:!1},A=Object(b.e)({name:"auth",initialState:z,extraReducers:(k={},Object(m.a)(k,_.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(k,_.logout.fulfilled,(function(e,t){e.user=z.user,e.token=z.token,e.isLoggedIn=z.isLoggedIn})),Object(m.a)(k,_.login.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(k,_.currentUser.fulfilled,(function(e,t){console.log(t),e.user.name=t.payload.name,e.user.email=t.payload.email,e.isLoggedIn=!0})),k)}).reducer,I=n(21),B=Object(b.b)("phonebook/filterContacts");y.a.defaults.baseURL="https://connections-api.herokuapp.com";var E=localStorage.getItem("persist:root");function F(){return(F=Object(v.a)(g.a.mark((function e(t){var n,r,a,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.number,e.next=3,y.a.post("/contacts",{name:r,number:a},{headers:{Authorization:"Bearer ".concat(null===(n=JSON.parse(E))||void 0===n?void 0:n.token.replace(/['"]/g,""))}}).then((function(e){return e})).catch((function(e){return e}));case 3:return c=e.sent,o=c.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(v.a)(g.a.mark((function e(t){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("/contacts/".concat(t),{headers:{Authorization:"Bearer ".concat(null===(n=JSON.parse(E))||void 0===n?void 0:n.token.replace(/['"]/g,""))}}).then((function(e){return e})).catch((function(e){return e}));case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(v.a)(g.a.mark((function e(){var t,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/contacts",{headers:{Authorization:"Bearer ".concat(null===(t=JSON.parse(E))||void 0===t?void 0:t.token.replace(/['"]/g,""))}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J,D={postContact:function(e){return F.apply(this,arguments)},fetchContacts:function(){return U.apply(this,arguments)},deleteContact:function(e){return q.apply(this,arguments)}},R=Object(b.c)("contacts/fetchContacts",function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.fetchContacts(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(b.c)("contacts/postContacts",function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.number,e.next=3,D.postContact({name:n,number:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(b.c)("contacts/deleteContacts",function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,D.deleteContact(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=Object(b.d)([],(J={},Object(m.a)(J,R.fulfilled,(function(e,t){return t.payload})),Object(m.a)(J,M.fulfilled,(function(e,t){return[].concat(Object(l.a)(e),[t.payload])})),Object(m.a)(J,T.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),J)),Z=Object(b.d)("",Object(m.a)({},B,(function(e,t){return t.payload}))),G=Object(I.b)({items:P,filter:Z}),V=[].concat(Object(l.a)(Object(b.f)({serializableCheck:{ignoredActions:[p.a,p.f,p.b,p.c,p.d,p.e]}})),[j.a]),X={key:"root",storage:h.a},Y=Object(b.a)({reducer:{auth:Object(p.g)(X,A),contacts:G},devTools:!1,middleware:V}),$=Object(p.h)(Y),H=(n(127),n(10)),K=(n(128),n(46)),Q=n(61),W=n(2),ee=["children"];function te(e){var t=e.children,n=Object(Q.a)(e,ee),r=Object(u.c)((function(e){return e.auth.isLoggedIn}));return Object(W.jsx)(H.b,Object(K.a)(Object(K.a)({},n),{},{children:r?t:Object(W.jsx)(H.a,{to:"/login"})}))}var ne=["redirectTo","children","restricted"];function re(e){var t=e.redirectTo,n=void 0===t?"/":t,r=e.children,a=e.restricted,c=void 0!==a&&a,o=Object(Q.a)(e,ne),s=Object(u.c)((function(e){return e.auth.isLoggedIn}))&&c;return Object(W.jsx)(H.b,Object(K.a)(Object(K.a)({},o),{},{children:s?Object(W.jsx)(H.a,{to:n}):r}))}var ae=n(144);function ce(){var e=Object(u.c)((function(e){return e.auth.isLoggedIn}));return Object(W.jsx)("div",{children:Object(W.jsx)(s.b,{to:"/contacts",children:Object(W.jsx)(ae.a,{variant:e?"contained":"disabled",color:"primary",children:"Contacts"})})})}var oe=n(174);function se(){return Object(W.jsxs)(oe.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(W.jsx)(s.b,{to:"/register",children:Object(W.jsx)(ae.a,{color:"primary",children:"Register"})}),Object(W.jsx)(s.b,{to:"/login",children:Object(W.jsx)(ae.a,{color:"primary",children:"Login"})})]})}var ie=n(176),ue=n(91),le=n.n(ue),be=n(67),de=n.n(be);function je(){var e=Object(u.c)((function(e){return e.auth.user})),t=Object(u.b)();return Object(r.useEffect)((function(){t(_.currentUser())}),[t]),Object(W.jsxs)("div",{className:de.a.cont,children:[Object(W.jsx)(ie.a,{alt:"avatar",color:"primary",children:Object(W.jsx)(le.a,{style:{fontSize:50},color:"primary"})}),Object(W.jsx)("p",{className:de.a.email,children:null===e||void 0===e?void 0:e.name}),Object(W.jsx)(ae.a,{onClick:function(){return t(_.logout())},variant:"contained",color:"primary",size:"small",children:"Log out"})]})}var pe=n(92),fe=n.n(pe);function he(){var e=Object(u.c)((function(e){return e.auth.isLoggedIn}));return Object(W.jsxs)("div",{className:fe.a.AppBar,children:[Object(W.jsx)(ce,{}),e?Object(W.jsx)(je,{}):Object(W.jsx)(se,{})]})}var me=n(29);n(135);function Oe(e){var t=e.name,n=e.number,r=e.handleChange,a=e.handleSubmit;return Object(W.jsxs)("form",{className:"phonebook-form",onSubmit:a,children:[Object(W.jsxs)("label",{className:"phonebook-label",children:["Name",Object(W.jsx)("input",{className:"phonebook-input",onChange:r,type:"text",name:"name",value:t,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0})]}),Object(W.jsxs)("label",{className:"phonebook-label",children:["Number",Object(W.jsx)("input",{className:"phonebook-input",onChange:r,type:"tel",name:"number",value:n,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0})]}),Object(W.jsx)(ae.a,{variant:"contained",color:"primary",size:"small",type:"submit",children:"Submit"})]})}n(136);function ge(e){var t=e.filter,n=e.handleChange;return Object(W.jsxs)("div",{children:[Object(W.jsx)("p",{className:"filter-title",children:"Find contacts by name"}),Object(W.jsx)("input",{className:"search",onChange:n,type:"text",name:"filter",value:t})]})}n(137);function ve(e){var t=e.contacts,n=e.deleteItem;return Object(W.jsx)("ul",{children:t.map((function(e){return Object(W.jsxs)("li",{className:"list-item",children:["".concat(e.name,": ").concat(e.number),Object(W.jsx)("button",{id:e.id,onClick:n,className:"delete-btn",children:"delete"})]},e.id)}))})}n(138);var xe=n(68);function ye(){var e=Object(r.useState)(""),t=Object(me.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(me.a)(c,2),s=o[0],i=o[1],l=Object(u.b)(),b=Object(u.c)((function(e){return e.contacts.items})),d=Object(u.c)((function(e){return e.contacts.filter}));Object(r.useEffect)((function(){l(R())}),[l]);var j=function(e){"filter"!==e.target.name?"name"!==e.target.name?"number"!==e.target.name||i(e.target.value):a(e.target.value):l(B(e.target.value))},p=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.id,e.next=3,l(T(n));case 3:l(R());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsxs)("div",{children:[Object(W.jsx)("h1",{children:"Phonebook"}),Object(W.jsx)(Oe,{name:n,number:s,handleChange:j,handleSubmit:function(e){e.preventDefault(),a(""),i(""),b.some((function(e){return null===e||void 0===e?void 0:e.name.includes(n)}))?xe.NotificationManager.error("".concat(n," is alredy in contacts"),"Error",3e3):l(M({name:n,number:s}))}}),Object(W.jsx)("h2",{children:"Contacts"}),Object(W.jsx)(ge,{filter:d,handleChange:j}),Object(W.jsx)(ve,{contacts:b.filter((function(e){return null===e||void 0===e?void 0:e.name.toLowerCase().includes(d.toLowerCase())})),deleteItem:p}),Object(W.jsx)(xe.NotificationContainer,{})]})}var we=n(175),ke=n(93),Ce=n.n(ke);function Ne(){var e=Object(r.useState)(""),t=Object(me.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(me.a)(c,2),s=o[0],i=o[1],l=Object(u.b)(),b=function(e){console.log(e.target.type),"email"!==e.target.type?"password"!==e.target.type||i(e.target.value):a(e.target.value)};return Object(W.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l(_.login({email:n,password:s})),a(""),i("")},noValidate:!0,autoComplete:"off",style:{width:300,display:"flex",flexDirection:"column"},children:[Object(W.jsx)(we.a,{onChange:b,required:!0,id:"standard-required",label:"Email",type:"email",helperText:"Enter your email"}),Object(W.jsx)(we.a,{onChange:b,required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password"}),Object(W.jsx)("button",{className:Ce.a.submitForm,type:"submit",children:Object(W.jsx)(ae.a,{variant:"contained",color:"primary",size:"small",children:"Submit"})})]})}var Se=n(69),Le=n.n(Se);function _e(){var e=Object(r.useState)(""),t=Object(me.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(me.a)(c,2),s=o[0],i=o[1],l=Object(r.useState)(""),b=Object(me.a)(l,2),d=b[0],j=b[1],p=Object(u.b)(),f=function(e){"text"!==e.target.type?"email"!==e.target.type?"password"!==e.target.type||j(e.target.value):i(e.target.value):a(e.target.value)};return Object(W.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(_.register({name:n,email:s,password:d})),a(""),i(""),j("")},noValidate:!0,autoComplete:"off",className:Le.a.registerForm,children:[Object(W.jsx)(we.a,{onChange:f,required:!0,id:"standard-required",label:"Name",type:"name"}),Object(W.jsx)(we.a,{onChange:f,required:!0,id:"standard-required",label:"Email",type:"email"}),Object(W.jsx)(we.a,{onChange:f,required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password"}),Object(W.jsx)("button",{className:Le.a.submitForm,type:"submit",children:Object(W.jsx)(ae.a,{variant:"contained",color:"primary",size:"small",children:"Submit"})})]})}var ze=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.auth.isLoggedIn}));return Object(r.useEffect)((function(){e(R())}),[e]),Object(W.jsxs)("div",{className:"container",children:[Object(W.jsx)(he,{}),Object(W.jsxs)(H.d,{children:[Object(W.jsx)(te,{path:"/contacts",children:Object(W.jsx)(ye,{})}),Object(W.jsx)(re,{path:"/login",restricted:!0,children:Object(W.jsx)(Ne,{})}),Object(W.jsx)(re,{path:"/register",restricted:!0,children:Object(W.jsx)(_e,{})}),Object(W.jsx)(H.b,{path:"/",children:t?Object(W.jsx)(H.a,{to:"/contacts"}):Object(W.jsx)(H.a,{to:"/login"})})]})]})};o.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(u.a,{store:Y,children:Object(W.jsx)(i.a,{loader:null,persistor:$,children:Object(W.jsx)(s.a,{children:Object(W.jsx)(ze,{})})})})}),document.getElementById("root"))},67:function(e,t,n){e.exports={cont:"UserMenu_cont__lDFDl",email:"UserMenu_email__2YE3N"}},69:function(e,t,n){e.exports={registerForm:"Register_registerForm__3mUSh",submitForm:"Register_submitForm__3NiX8"}},92:function(e,t,n){e.exports={AppBar:"AppBar_AppBar__2gg5G"}},93:function(e,t,n){e.exports={submitForm:"Login_submitForm__2G2Tb"}}},[[142,1,2]]]);
//# sourceMappingURL=main.e1c60174.chunk.js.map